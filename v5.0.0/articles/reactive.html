<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Reactive Global Hooks </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Reactive Global Hooks ">
    <meta name="generator" content="docfx 2.59.4.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="reactive-global-hooks">Reactive Global Hooks</h1>

<p>If you're using Rx.NET, you can use the SharpHook.Reactive package to integrate SharpHook with Rx.NET. Using this
package is preferred when possible since it's more powerful.</p>
<h2 id="the-interface">The Interface</h2>
<p>SharpHook.Reactive provides the <code>SharpHook.Reactive.IReactiveGlobalHook</code> interface along with a default implementation
which you can use to use to control the hook and subscribe to its observables. Here's a basic example:</p>
<pre><code class="lang-C#">using SharpHook.Reactive;

// ...

var hook = new SimpleReactiveGlobalHook();

hook.HookEnabled.Subscribe(OnHookEnabled);
hook.HookDisabled.Subscribe(OnHookDisabled);

hook.KeyTyped.Subscribe(OnKeyTyped);
hook.KeyPressed.Subscribe(OnKeyPressed);
hook.KeyReleased.Subscribe(OnKeyReleased);

hook.MouseClicked.Subscribe(OnMouseClicked);
hook.MousePressed.Subscribe(OnMousePressed);
hook.MouseReleased.Subscribe(OnMouseReleased);

hook.MouseMoved
    .Throttle(TimeSpan.FromSeconds(0.5))
    .Subscribe(OnMouseMoved);

hook.MouseDragged
    .Throttle(TimeSpan.FromSeconds(0.5))
    .Subscribe(OnMouseDragged);

hook.MouseWheel.Subscribe(OnMouseWheel);

hook.Run();
// or
hook.RunAsync().Subscribe();
</code></pre>
<p>The observables for events emit the <code>EventArgs</code>-derived types which are the same as in the events of <code>IGlobalHook</code>.
Unlike <code>IGlobalHook</code> you can't get the sender of the event by default. If you need to pass the hook itself as well, then
use a closure.</p>
<p>The <code>HookEnabled</code> and <code>HookDisabled</code> observables will emit a single event and then immediately complete afterwards.</p>
<p>The <code>Run</code> and <code>RunAsync</code> methods are basically the same as in <code>IGlobalHook</code>, but <code>RunAsync</code> returns an
<code>IObservable&lt;Unit&gt;</code> instead of a <code>Task</code> (the observable is hot). This observable will emit a single value and then
complete when the global hook is destroyed. Running the hook when it's already running is also not allowed, and the
<code>IsRunning</code> property is also available.</p>
<p><code>IReactiveGlobalHook</code> extends <code>IDisposable</code> as well and calling <code>Dispose</code> will destroy the global hook. As with
<code>IGlobalHook</code>, starting a disposed instance again shouldn't be allowed. Calling <code>Dispose</code> when the hook is not running
is safe - it just won't do anything (other than marking the instance as disposed). The <code>IsDisposed</code> property is also
available.</p>
<h2 id="the-default-implementations">The Default Implementations</h2>
<p>SharpHook.Reactive provides two implementations of <code>IReactiveGlobalHook</code>:</p>
<ul>
<li><p><code>SharpHook.Reactive.SimpleReactiveGlobalHook</code>. Since we're dealing with observables, it's up to you to decide when
and where to handle the events through schedulers.</p>
</li>
<li><p><code>SharpHook.Reactive.ReactiveGlobalHookAdapter</code> adapts an <code>IGlobalHook</code> to <code>IReactiveGlobalHook</code>. All
subscriptions and changes are propagated to the adapted hook. There is no default adapter from <code>IReactiveGlobalHook</code>
to <code>IGlobalHook</code>.</p>
</li>
</ul>
<p>Both classes contain a destructor which will stop the global hook if the object is not reachable anymore. All event
observables of both classes will be completed when the hook is destroyed, be it from the <code>Dispose</code> method, or from the
destructor.</p>
<p>Next article: <a href="simulation.html">Event Simulation</a>.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/TolikPylypchuk/SharpHook/blob/master/docs/articles/reactive.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
